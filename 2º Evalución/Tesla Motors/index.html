<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type"
		content="text/html; charset=UTF-8" />
	<title>Presentacion de Vehículo</title>

	<!-- Importacion del jQuery -->
	<script src="js/lib/jquery-2.1.4.min.js"></script>

	<!-- Importacion del Bootstrap -->
	<link rel="stylesheet"
		href="css/bootstrap.min.css">

	<link rel="stylesheet"
		href="css/style.css">

</head>

<body>


	<div class="container text-center">

		<h1>Objetos Prácticos: <small>Ejemplo de vehículo</small></h1>
		<hr>



		<div class="divPreloader">
			<img src="img/loading.gif"
				class="imgLoader img-responsive">
		</div>


		<div class="divVistaPrevia">
			<img id="imgCoche"
				src="img/tesla/modelS-blanco.jpg"
				class="img-responsive">
		</div>

		<div class="form-group">
			<div class="col-sm-offset-4 col-sm-5">
				<select id="cmbColor"
					class="form-control">
					<option value="blanco">Blanco</option>
					<option value="negro">Negro</option>
					<option value="rojo">Rojo</option>
				</select>
			</div>
		</div>

	</div>



	<script>
		/* eslint-disable no-undef */
		(function () {

			const teslaView = {
				loader: $('.divPreloader'),
				colores: ['azul', 'blanco', 'cafe', 'gris', 'negro', 'rojo', 'rojooscuro', 'verde'],
				init: function () {
					this.colores.forEach(e =>
						$('<option>', {
							value: e,
							text: e
						}).appendTo('#cmbColor')
					)
					$('.divPreloader').hide()
					this.cambiarColor()

				},
				cambiarColor: function (img) {
					if (img === undefined) img = 'img/tesla/modelS-' + this.colores[0] + '.jpg'
					let loader = this.loader
					$('<img>', {
						src: img,
						class: 'img-responsive'
					}).load( function() {
						$('#imgCoche').attr('src', img)
						loader.fadeIn(150)
						$('.divVistaPrevia').find('img').remove()
						$(this).appendTo('.divVistaPrevia')
						loader.fadeOut(150)
					})


				}
			}

			$('#cmbColor').change(function () {
				let color = $(this).val()
				let url = 'img/tesla/modelS-' + color + '.jpg'
				teslaView.cambiarColor(url)
			})

			teslaView.init()


		})()
	</script>





</body>

</html>